import{_ as c,g as h,o as l,c as d,a as n,t as o,b as g,F as y,r as p,R as f,s as _,d as m,e as v}from"./index-31454946.js";const $={props:{movies:{type:Array,default:()=>[]}},data(){return{title:"Search your favorite movie!",selectedMovie:null,baseUrlImg:"https://image.tmdb.org/t/p/w500",urlNoResultImg:"",key:null}},created(){this.key=h().vnode.key},methods:{updateSearchResults(e){let t=this.$route.query.searchQuery,a=this.$route.query.year,u=this.$route.query.genre;this.$route.query.searchQuery==null&&(t=""),this.$route.query.year==null&&(a=""),this.$route.query.genre==null&&(u=""),e==null&&(e=1),this.$router.push("/movies?searchQuery="+t+"&genre="+u+"&year="+a+"&page="+e)},getTotalResults(){return this.key.total_results},getTotalPages(){return this.key.total_pages},getMovies(){return this.key.results},onSelect(e){this.$router.push({name:"movie",params:{id:e.id}})},nextPage(){let e=+this.$route.query.page+1;e>this.getTotalPages()&&(e=this.getTotalPages()),this.updateSearchResults(e)},prevPage(){let e=+this.$route.query.page-1;e<1&&(e=1),this.updateSearchResults(e)},currentPage(){return+this.$route.query.page}}},R={class:"title"},b={class:"page-nav"},k=["disabled"],P=["disabled"],S={class:"movies"},q=["onClick"],B=["src"],Q={class:"movie-title"},x={class:"movie-release"};function C(e,t,a,u,i,s){return l(),d("div",null,[n("h2",R,o(i.title),1),n("div",b,[n("button",{onClick:t[0]||(t[0]=(...r)=>s.prevPage&&s.prevPage(...r)),disabled:e.pageNumber===1}," < Previous ",8,k),g(" Page "+o(s.currentPage())+" ",1),n("button",{onClick:t[1]||(t[1]=(...r)=>s.nextPage&&s.nextPage(...r)),disabled:e.pageNumber>=e.pageCount}," Next > ",8,P),n("p",null,"("+o(s.getTotalResults())+" rÃ©sultats)",1)]),n("ul",S,[(l(!0),d(y,null,p(s.getMovies(),r=>(l(),d("li",{onClick:I=>s.onSelect(r)},[n("img",{class:"movie-img",src:i.baseUrlImg+r.backdrop_path,alt:"movie picture"},null,8,B),n("span",Q,o(r.title),1),n("span",x,o(r.release_date),1)],8,q))),256))])])}const M=c($,[["render",C],["__scopeId","data-v-bee56c81"]]),N={components:{RecentMovieList:f,SearchResults:M},data(){return{movies:[]}},mounted(){this.updateSearchResults()},beforeRouteUpdate(e,t){this.updateSearchResults(e.query)},methods:{updateSearchResults(e){let t="",a="",u="",i=1,s="";e==null?(t=this.$route.query.searchQuery,a=this.$route.query.year,u=this.$route.query.genre,i=this.$route.query.page,s=this.$route.query.sortBy,this.$route.query.searchQuery==null&&(t=""),this.$route.query.year==null&&(a=""),this.$route.query.genre==null&&(u=""),this.$route.query.page==null&&(i=1),this.$route.query.sortBy==null&&(s="rating")):(t=e.searchQuery,a=e.year,u=e.genre,i=e.page,s=e.sortBy,e.searchQuery==null&&(t=""),e.year==null&&(a=""),e.genre==null&&(u=""),e.page==null&&(i=1),e.sortBy==null&&(s="rating")),_(t,u,a,i,s).then(r=>this.movies=r)}}};function T(e,t,a,u,i,s){const r=m("SearchResults");return l(),v(r,{key:i.movies})}const U=c(N,[["render",T]]);export{U as default};
